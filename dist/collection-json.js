!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();t.exports=e=n.fetch,e.default=n.fetch.bind(n),e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response},function(t,e,r){"use strict";r.r(e);var n=r(0),i=r.n(n);let o="application/vnd.collection+json";class s{http_callback(t,e){t.status<400?t.text().then(r=>{e(null,r,t.headers)}):e(t.status)}get(t,e,r){i()(t).then(t=>{this.http_callback(t,r)}).catch(t=>r(t))}post(t,e,r){return http_options=Object.assign({},e,{method:"POST",body:JSON.stringify(e.body),headers:e.headers,redirect:"follow",mode:"CORS",credentials:"same-origin",referrer:"client"}),i()(t,http_options).then(this.http_callback,r)}put(t,e,r){return http_options=Object.assign({},e,{method:"PUT",body:JSON.stringify(e.body),headers:headers,redirect:"follow",mode:"CORS",credentials:"same-origin",referrer:"client"}),i()(t,http_options).then(this.http_callback,r)}delete(t,e,r){return http_options=Object.assign({},e,{method:"DELETE",body:JSON.stringify(e.body),headers:headers,redirect:"follow",mode:"CORS",credentials:"same-origin",referrer:"client"}),i()(t,http_options).then(http_callback,r)}}var l=new class{constructor(t){this.source=null==t||null==t?new s:t}get(t,e,r){e.headers||(e.headers={}),e.headers.accept=o,this.source.get(t,e,function(t,e,n){return!(!t&&!e)&&r(t,e,n)})}post(t,e,r){null==e&&(e={}),e.headers||(e.headers={}),e.headers=Object.assign({},e.headers,{accept:o,"content-type":o,"Content-Type":"application/collection+json; charset=utf-8"}),this.source.post(t,e,function(t,e,n){return!(!t&&!e)&&r(t,e,n)})}put(t,e,r){null==e&&(e={}),e.headers||(e.headers={}),e.headers=Object.assign({},e.headers,{accept:o,"content-type":o,"Content-Type":"application/collection+json; charset=utf-8"}),this.source.put(t,e,function(t,e,n){return!(!t&&!e)&&r(t,e,n)})}delete(t,e,r){null==e&&(e={}),e.headers||(e.headers={}),e.headers=Object.assign({},e.headers,{accept:o,"content-type":o,"Content-Type":"application/collection+json; charset=utf-8"}),this.source.delete(t,e,function(t,e,n){return!(!t&&!e)&&r(t,e,n)})}};class u{constructor(t){this._link=t}get href(){return this._link&&this._link.href||null}get rel(){return this._link&&this._link.rel||null}get prompt(){return this._link&&this._link.prompt||null}follow(t){null==t&&(t=function(){});return l.get(this._link.href,{},function(e,r){return e?t(e):d.parse(r,t)})}}function c(t,e){var r={};return t instanceof Array?t.map(function(t){return c(t,e)}):t instanceof Date?new Date(t):t instanceof RegExp?new RegExp(t):t instanceof Function?e&&e.newFns?new Function("return "+t.toString())():t:t instanceof Object?(Object.keys(t).forEach(function(n){r[n]=c(t[n],e)}),r):[void 0,null].indexOf(t)>-1?t:"Symbol"===t.constructor.name?Symbol(t.toString().replace(/^Symbol\(/,"").slice(0,-1)):t.__proto__.constructor(t)}class a{constructor(t,e,r){if(null==t||null==t||""==t)throw"Template without a target URL";this.href=t,this._template=e,null==r&&(r={}),this.form=r;const{_template:n}=this,i=this.form;null!=n&&null!=n&&n.data&&n.data.forEach(function(t){null==i[t.name]&&(i[t.name]=t.value)})}datum(t){if(null==this._template)return null;return c(this._template.data.find(e=>e.name===t))}get(t){return this.form[t]}set(t,e){return this.form[t]=e}promptFor(t){let e=this.datum(t);return e&&e.prompt}submit(t){null==t&&(t=function(){});const e={body:{template:{data:this.form.map((t,e)=>({name:e,value:t}))}}};return l.post(this.href,e,function(e,r){return e?t(e):d.parse(r,t)})}}class h{constructor(t,e){this._item=t,this._template=e,this._links={}}datum(t){let e=this._item&&this._item.data&&this._item.data.find(e=>e.name===t);return e?c(e):null}get href(){return this._item.href}get(t){let e=this.datum(t);return e&&e.value}promptFor(t){let e=this.datum(t);return e&&e.prompt}load(t){return l.get(this._item.href,{},function(e,r){return e?t(e):d.parse(r,t)})}links(){return this._item.links}link(t){let e=this._item.links&&this._item.links.find(e=>e.rel===t);return e?(e&&(this._links[t]=new u(e)),this._links[t]):null}edit(){if(!this._template)throw new Error("Item does not support editing");const t=_.clone(this._template);return t.href=this._item.href,new a(t,this.data())}remove(t){return l.del(this._item.href,{},function(e,r){return e?t(e):d.parse(r,t)})}}class f{constructor(t,e){this._query=t,this.form=e||{};const{_query:r}=this,n=this.form;r.data.forEach(t=>{null==n[t.name]&&(n[t.name]=t.value)})}get href(){return this._query.href}get rel(){return this._query.rel}get prompt(){return this._query.prompt}datum(t){return c(this._query.data.find(e=>e.name===t))}get(t){return this.form[t]}set(t,e){return this.form[t]=e}promptFor(t){let e=this.datum(t);return e&&e.prompt}submit(t){null==t&&(t=function(){});const e={qs:this.form};return l.get(this._query.href,e,function(e,r){return e?t(e):d.parse(r,t)})}}class p{constructor(t){if(t&&t.collection&&"1.0"!==t.collection.version)throw new Error("Collection does not conform to Collection+JSON 1.0 Spec");this._collection=t.collection,this._items=this._collection.items,this._template=null,this.error=this._collection.error,this.href=this._collection.href,this.version=this._collection.version,this.links=(this._collection.links||[]).map(t=>new u(t)),this.items=(this._collection.items||[]).map(t=>new h(t)),this.queries=(this._collection.queries||[]).map(t=>new f(t))}link(t){return this.links.find(e=>e.rel===t)}item(t){return this.items.find(e=>e.href===t)}query(t){const e=(this._collection.queries||[]).find(e=>e.rel===t);return e?new f(e):null}get template(){return this._collection.template?new a(this._collection.href,this._collection.template):null}}r.d(e,"default",function(){return d});class d{constructor(t,e,r){"function"==typeof e&&(r=e,e={});return l.get(t,e,(t,e)=>{if(t)return r(t);d.parse(e,r)}),!0}static parse(t,e){let r,n;if(null==e)throw new Error("Callback must be passed to parse");if(null==t)return e();if("string"==typeof t)try{t=JSON.parse(t)}catch(r){return(n=r).body=t,e(n)}let i=null;try{i=new p(t)}catch(r){return(n=r).body=JSON.stringify(t),e(n)}let o=null;return(r=i.error)&&((o=new Error).title=r.title,o.message=r.message,o.code=r.code,o.body=JSON.stringify(t)),e(o,i)}}window.cJ=d}]);